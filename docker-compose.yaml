version: "2"

services:
  db:
    image: mysql:5.6
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: password
      MYSQL_DATABASE: cs
    ports:
      - 3306:3306

  hlds:
    build: .
    depends_on:
      - db
    environment:
      GAME: "cstrike"
      MAXPLAYERS: "32"
      START_MAP: "de_dust2"
      SERVER_NAME: "Shaks CS Server #2"
      START_MONEY: "800"
      BUY_TIME: "3"
      FRIENDLY_FIRE: "0"
      RESTART_ON_FAIL: "1"
      SERVER_PASSWORD: "nomaam"
      RCON_PASSWORD: "supersecret"
    ports:
      - 26900:26900/udp
      - 27020:27020/udp
      - 27015:27015/udp
      - 27015:27015/tcp
